# 前记
这是我个人在学习卡尔曼滤波过程中，对其的一点浅薄理解，一点想法。希望能为后人，作参考一二。
## 平均值
世界是嘈杂的。Kalman and Bayesian Fliter 这本书中如此说道。诚然，我们无法获得一个精确的数，世界总在和我们开名为误差的玩笑。只是误差，就好像命运石之门中时间线的收束，是有一个误差范围的。  
根据大数定理，按照正态分布在正确值两侧的误差，在全部互加后，应当等于0.  
（想象一下一堆石头，偏冷或者偏热，但是全部混一起就温度刚刚好）  
因此我们对获取的数据作平均数，也就是(x1+x2+x3+....xn)/n，理论上就可以得到完美的数据。  
你这么做了吗？那恭喜你，你获得了一个均值滤波器。当然，因为我们实际传感器是离散的，并且不可能等待收集足够多数据再取平均数。我们需要一边收集数据，一边进行平均，这样就需要一个新的公式
mean_new=(S_old+x_new)/n+1,也可以写成：  
mean_new=(mean_old*n+x_new)/(n+1),然后  
mean_new=(mean_old*n+mean_old-mean_old+x_new)/(n+1)  
=(mean_old*(n+1)-mean_old+x_new)/(n+1)  
即mean_new=mean_old+(x_new-mean_old)/(n+1)  
这样我们就得到了一个比较简洁的公式，只需要储存平均值和数字个数，再加一个新数据就足够了 
与此同时，数据会不断更新，我们要不断丢弃旧的数据，这会导致我们要加非常多次的数据
(时间复杂度O(n)，也就是指数级增长的计算量），因此我们需要让每一个新进来的家伙自己找好定位，而不是让整体去适应它。
那么我们便做点数学手段：
假设我们设置一个“窗口”，只对某个有n个数的范围内的数作平均，那么便有
S_new=S-x_old +x_new
mean_new=S_new/n
这个等价于：（S-x_old）/n+ x_new/n,也就是mean_new=mean_old+(x_new-x_old)/n
那么这便就是简单的滑动均值滤波器。  


